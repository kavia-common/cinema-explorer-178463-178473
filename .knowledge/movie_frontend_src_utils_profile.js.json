{"is_source_file": true, "format": "JavaScript", "description": "This file defines a utility function `upsertProfileForUser` that ensures a user's profile exists and is up-to-date in a Supabase database. It handles inserting or updating profile data and provides helpful console warnings if issues occur, such as missing database tables.", "external_files": ["../lib/supabaseClient"], "external_methods": ["getSupabaseClient"], "published": ["upsertProfileForUser"], "classes": [], "methods": [{"name": "upsertProfileForUser(user)", "description": "Asynchronously inserts or updates a user profile in the 'profiles' table in Supabase. Handles error scenarios such as missing table and logs warnings accordingly.", "scope": "", "scopeKind": ""}], "calls": ["getSupabaseClient", "supabase.from('profiles').upsert(payload, { onConflict: 'id' })"], "search-terms": ["upsertProfileForUser", "supabaseClient", "profiles table", "user_metadata", "upsert", "profile creation", "database error handling"], "state": 2, "file_id": 37, "knowledge_revision": 96, "git_revision": "", "ctags": [{"_type": "tag", "name": "avatar_url", "path": "/home/kavia/workspace/code-generation/cinema-explorer-178463-178473/movie_frontend/src/utils/profile.js", "pattern": "/^    avatar_url: meta.avatar_url || meta.picture || null,$/", "language": "JavaScript", "kind": "property", "scope": "upsertProfileForUser.payload", "scopeKind": "class"}, {"_type": "tag", "name": "email", "path": "/home/kavia/workspace/code-generation/cinema-explorer-178463-178473/movie_frontend/src/utils/profile.js", "pattern": "/^    email: user.email || meta.email || null,$/", "language": "JavaScript", "kind": "property", "scope": "upsertProfileForUser.payload", "scopeKind": "class"}, {"_type": "tag", "name": "full_name", "path": "/home/kavia/workspace/code-generation/cinema-explorer-178463-178473/movie_frontend/src/utils/profile.js", "pattern": "/^    full_name: meta.full_name || meta.name || user.email || null,$/", "language": "JavaScript", "kind": "property", "scope": "upsertProfileForUser.payload", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/cinema-explorer-178463-178473/movie_frontend/src/utils/profile.js", "pattern": "/^    id: user.id,$/", "language": "JavaScript", "kind": "property", "scope": "upsertProfileForUser.payload", "scopeKind": "class"}, {"_type": "tag", "name": "payload", "path": "/home/kavia/workspace/code-generation/cinema-explorer-178463-178473/movie_frontend/src/utils/profile.js", "pattern": "/^  const payload = {$/", "language": "JavaScript", "kind": "class", "scope": "upsertProfileForUser", "scopeKind": "class"}, {"_type": "tag", "name": "updated_at", "path": "/home/kavia/workspace/code-generation/cinema-explorer-178463-178473/movie_frontend/src/utils/profile.js", "pattern": "/^    updated_at: new Date().toISOString(),$/", "language": "JavaScript", "kind": "property", "scope": "upsertProfileForUser.payload", "scopeKind": "class"}, {"_type": "tag", "name": "upsertProfileForUser", "path": "/home/kavia/workspace/code-generation/cinema-explorer-178463-178473/movie_frontend/src/utils/profile.js", "pattern": "/^export async function upsertProfileForUser(user) {$/", "language": "JavaScript", "kind": "function", "signature": "(user)"}], "hash": "00c036b4191e7a841ed02973bfb10dba", "format-version": 4, "code-base-name": "movie_frontend", "filename": "movie_frontend/src/utils/profile.js", "fields": [{"name": "avatar_url: meta.avatar_url || meta.picture || null,", "scope": "upsertProfileForUser.payload", "scopeKind": "class", "description": "unavailable"}, {"name": "email: user.email || meta.email || null,", "scope": "upsertProfileForUser.payload", "scopeKind": "class", "description": "unavailable"}, {"name": "full_name: meta.full_name || meta.name || user.email || null,", "scope": "upsertProfileForUser.payload", "scopeKind": "class", "description": "unavailable"}, {"name": "id: user.id,", "scope": "upsertProfileForUser.payload", "scopeKind": "class", "description": "unavailable"}, {"name": "updated_at: new Date().toISOString(),", "scope": "upsertProfileForUser.payload", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"96": ""}]}